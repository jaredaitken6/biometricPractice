<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Budget Planner</title>
</head>
<body>
  <main>
  <button id="registerButton" aria-label="Register your passkey">Register Passkey</button>
  <button id="authButton" aria-label="Authenticate using biometrics">Authenticate with Biometrics</button>
  <p id="status"></p>

  <header>
  <h1>Budget Planner</h1>
  </header>
  <label for="budgetItem">Name of expense or income:</label>
  <input type="text" id="budgetItem" placeholder="Restaurant">
  <label for="budgetAmount">Amount (e.g. -20):</label>
  <input type="number" id="budgetAmount" placeholder="-50">
  <button id="addBudget">Add</button>
  
  <h3>Total Balance: $<span id="totalBalance">0.00</span></h3>
  
  <h3>Budget Items</h3>
  <ul id="budgetList"></ul>
</main>

<footer>
  <p>&copy; 2025 Budget Planner</p>
</footer>

  <!-- Firebase SDK Setup -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCVtdFaBxbm0gvd6-M9zEb8tEJwB_ZexYI",
      authDomain: "biometricbudgetingapp.firebaseapp.com",
      projectId: "biometricbudgetingapp",
      storageBucket: "biometricbudgetingapp.appspot.com",
      messagingSenderId: "384133806113",
      appId: "1:384133806113:web:227aac5087e2e88fe84b60",
      measurementId: "G-RPBV38G6SB"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    window.db = db; // Make db globally accessible
  </script>

  <!-- Link to External JavaScript -->
  <script src="script.js" type="module"></script>

    <!-- Chatbase Integration -->
  <script>
    (function() {
      if (!window.chatbase || window.chatbase("getState") !== "initialized") {
        window.chatbase = function() {
          if (!window.chatbase.q) {
            window.chatbase.q = [];
          }
          window.chatbase.q.push(arguments);
        };
    
        window.chatbase = new Proxy(window.chatbase, {
          get: function(target, prop) {
            if (prop === "q") {
              return target.q;
            }
            return function() {
              target(prop, arguments);
            };
          }
        });
      }
    
      const onLoad = function() {
        const script = document.createElement("script");
        script.src = "https://www.chatbase.co/embed.min.js";
        script.id = "M-4X4SuUJVDpe9bWgpQnb";
        script.domain = "www.chatbase.co";
        document.body.appendChild(script);
      };
    
      if (document.readyState === "complete") {
        onLoad();
      } else {
        window.addEventListener("load", onLoad);
      }
    })();
    </script>
      
</body>
</html>